---
description:
globs:
alwaysApply: false
---
# LinkedIn í¬ë¡¤ëŸ¬ ê°€ì´ë“œ

LinkedIn í”Œë«í¼ì—ì„œ ê²Œì‹œê¸€ì„ í¬ë¡¤ë§í•˜ëŠ” ì‹œìŠ¤í…œì— ëŒ€í•œ ì¢…í•© ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“ íŒŒì¼ êµ¬ì¡°

### í•µì‹¬ íŒŒì¼ë“¤
- [src/crawlers/linkedin.py](mdc:src/crawlers/linkedin.py) - LinkedIn ì „ìš© í¬ë¡¤ëŸ¬ (ìµœì‹  ì—…ë°ì´íŠ¸ ì™„ë£Œ)
- [src/crawlers/base.py](mdc:src/crawlers/base.py) - ëª¨ë“  í¬ë¡¤ëŸ¬ì˜ ë² ì´ìŠ¤ í´ë˜ìŠ¤
- [main.py](mdc:main.py) - CLI ì¸í„°í˜ì´ìŠ¤
- [src/models.py](mdc:src/models.py) - ë°ì´í„° ëª¨ë¸ ì •ì˜

### ì„¤ì • íŒŒì¼ë“¤
- `.env` - í™˜ê²½ ë³€ìˆ˜ (LinkedIn ë¡œê·¸ì¸ ì •ë³´)
- `data/linkedin_session.json` - Storage State ê¸°ë°˜ ì„¸ì…˜ ì €ì¥

## ğŸŒ LinkedIn ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡°

### URL íŒ¨í„´
```
https://www.linkedin.com/feed/ - ë©”ì¸ í”¼ë“œ
https://www.linkedin.com/login - ë¡œê·¸ì¸ í˜ì´ì§€
https://www.linkedin.com/uas/login - ëŒ€ì²´ ë¡œê·¸ì¸ í˜ì´ì§€
https://www.linkedin.com/feed/update/urn:li:activity:ID/ - ê°œë³„ ê²Œì‹œê¸€
https://www.linkedin.com/in/username - ê°œì¸ í”„ë¡œí•„
https://www.linkedin.com/company/company-name - íšŒì‚¬ í˜ì´ì§€
```

### DOM êµ¬ì¡° íŠ¹ì„± (2025ë…„ 5ì›” ì—…ë°ì´íŠ¸)
```html
<!-- ê²Œì‹œê¸€ ì»¨í…Œì´ë„ˆ (ë‹¤ì¤‘ ì„ íƒì ì‹œìŠ¤í…œ) -->
<div class="feed-shared-update-v2" data-urn="update">
  <!-- ì‘ì„±ì ì •ë³´ -->
  <a href="/in/username" class="update-components-actor__meta-link">
    <span class="update-components-actor__title">
      <span dir="ltr" aria-hidden="true">ì‘ì„±ìëª…</span>
    </span>
  </a>

  <!-- íƒ€ì„ìŠ¤íƒ¬í”„ (ì •ê·œì‹ íŒ¨í„´ ê¸°ë°˜ ì¶”ì¶œ) -->
  <span class="update-components-actor__sub-description" aria-hidden="true">
    3ì£¼ â€¢ ìˆ˜ì •ë¨ â€¢ <!-- ê°œì„ ëœ íŒ¨í„´ ë§¤ì¹­ -->
  </span>

  <!-- ê²Œì‹œê¸€ ì½˜í…ì¸  (ë”ë³´ê¸° í™•ì¥ í›„) -->
  <div class="update-components-text">
    <span class="break-words" dir="ltr">ê²Œì‹œê¸€ ë‚´ìš©...</span>
  </div>

  <!-- ë”ë³´ê¸° ë²„íŠ¼ (ì „ì²´ í˜ì´ì§€ì—ì„œ ì¼ê´„ ì²˜ë¦¬) -->
  <button class="feed-shared-inline-show-more-text__see-more-less-toggle">
    ë”ë³´ê¸°
  </button>

  <!-- ìƒí˜¸ì‘ìš© ì •ë³´ -->
  <div class="social-details-social-counts">
    <button data-reaction-details="" aria-label="ë°˜ì‘ 134">
      <span>134</span> <!-- ì¢‹ì•„ìš” ìˆ˜ -->
    </button>
  </div>
</div>

<!-- ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ ì§€í‘œ -->
<button aria-label="Start a post">ê²Œì‹œê¸€ ì‘ì„±</button>
<div data-control-name="identity_welcome_message">í”„ë¡œí•„ ë©”ë‰´</div>
```

## ğŸ”„ í¬ë¡¤ë§ í”„ë¡œì„¸ìŠ¤ íë¦„ë„

```mermaid
graph TD
    A[ì‹œì‘] --> B[í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ]
    B --> C[Storage State í™•ì¸]
    C --> D{ì„¸ì…˜ ì¡´ì¬?}

    D -->|Yes| E[ì„¸ì…˜ ë¡œë“œ ì‹œë„]
    D -->|No| F[ìƒˆ í˜ì´ì§€ ë¡œë“œ]

    E --> G{ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸}
    G -->|Success| H[í”¼ë“œ ì ‘ê·¼ ì„±ê³µ]
    G -->|Failed| I[ì„¸ì…˜ ë§Œë£Œ - ì¬ë¡œê·¸ì¸]

    F --> J[í”¼ë“œ í˜ì´ì§€ ë¡œë“œ]
    J --> K{ë¡œê·¸ì¸ ìƒíƒœ?}
    K -->|No| L[ë¡œê·¸ì¸ í¼ ì²˜ë¦¬]
    K -->|Yes| H

    L --> M[ê³„ì • ì •ë³´ ì…ë ¥]
    M --> N[ë³´ì•ˆ ì¸ì¦ ì²˜ë¦¬]
    N --> O[ì„¸ì…˜ ì €ì¥]
    O --> H

    I --> L

    H --> P[ì „ì²´ ë”ë³´ê¸° ë²„íŠ¼ í´ë¦­]
    P --> Q[ìƒë‹¨ë¶€í„° ê²Œì‹œê¸€ ì¶”ì¶œ]
    Q --> R{ëª©í‘œ ë‹¬ì„±?}
    R -->|No| S[ìŠ¤í¬ë¡¤ í›„ ë°˜ë³µ]
    R -->|Yes| T[JSON ì €ì¥]
    S --> P
    T --> U[ì™„ë£Œ]
```

## âš™ï¸ ì£¼ìš” ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜ (.env)
```bash
LINKEDIN_USERNAME=your_email@example.com
LINKEDIN_PASSWORD=your_password
LINKEDIN_SESSION_PATH=./data/linkedin_session.json
LINKEDIN_LOGIN_TIMEOUT=30000
LINKEDIN_LOGIN_RETRY_COUNT=3
```

### í¬ë¡¤ëŸ¬ ì„¤ì •
- **User-Agent**: Windows Chrome (ë°ìŠ¤í¬í†± í™˜ê²½)
- **ì„¸ì…˜ ê´€ë¦¬**: Storage State ê¸°ë°˜ (cookies + localStorage)
- **íƒ€ì„ì•„ì›ƒ**: ë¡œê·¸ì¸ 30ì´ˆ, í˜ì´ì§€ ë¡œë“œ 15ì´ˆ
- **ìŠ¤í¬ë¡¤ ì œí•œ**: ìµœëŒ€ 5íšŒ ì‹œë„
- **ì¶”ì¶œ ë°©ì‹**: ë”ë³´ê¸° í´ë¦­ â†’ ìƒë‹¨ ì¶”ì¶œ

## ğŸš¨ LinkedIn íŠ¹í™” ë¬¸ì œì™€ í•´ê²°ì±…

### 1. ë”ë³´ê¸° ë²„íŠ¼ ì²˜ë¦¬ (í•µì‹¬ ê°œì„ ì‚¬í•­)
**ë¬¸ì œ**: ê²Œì‹œê¸€ë³„ ë”ë³´ê¸° ë²„íŠ¼ì„ ê°œë³„ ì²˜ë¦¬í•˜ë©´ ë¹„íš¨ìœ¨ì 

**í•´ê²°ì±…**:
```python
# 1ë‹¨ê³„: í˜ì´ì§€ ì „ì²´ì˜ ë”ë³´ê¸° ë²„íŠ¼ ëª¨ë‘ í´ë¦­
await self._expand_all_posts_on_page(page)

# 2ë‹¨ê³„: ìƒë‹¨ì—ì„œë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ê²Œì‹œê¸€ ì¶”ì¶œ
current_posts = await self._collect_expanded_posts(page, target_count)
```

### 2. íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ì¶œ ë¬¸ì œ (ìµœê·¼ í•´ê²°)
**ë¬¸ì œ**: ì „ì²´ ì½˜í…ì¸ ê°€ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì¶”ì¶œë˜ëŠ” ì˜¤ë¥˜

**í•´ê²°ì±…**: ì •ê·œì‹ íŒ¨í„´ ê¸°ë°˜ ì¶”ì¶œ
```python
time_patterns = [
    r'(\d+ë¶„\s*[â€¢Â·]?)',      # "30ë¶„ â€¢"
    r'(\d+ì‹œê°„\s*[â€¢Â·]?)',     # "2ì‹œê°„ â€¢"
    r'(\d+ì¼\s*[â€¢Â·]?)',      # "3ì¼ â€¢"
    r'(\d+ì£¼\s*[â€¢Â·]?)',      # "2ì£¼ â€¢"
    r'(\d+ê°œì›”\s*[â€¢Â·]?)',    # "3ê°œì›” â€¢"
    r'(\d+ë…„\s*[â€¢Â·]?)',      # "1ë…„ â€¢"
    r'(í˜„ì¬\s*ì‹œê°„)',        # "í˜„ì¬ ì‹œê°„"
]
```

### 3. ë³´ì•ˆ ì¸ì¦ ë‹¨ê³„
**ë¬¸ì œ**: ì´ë©”ì¼ ì¸ì¦, "Trust this browser" ë“± ì¶”ê°€ ë‹¨ê³„

**í•´ê²°ì±…**:
```python
async def _handle_security_challenges(self, page):
    # ì´ë©”ì¼ ì¸ì¦ ì½”ë“œ ì…ë ¥
    verification_input = await page.query_selector('input[name="pin"]')
    if verification_input:
        verification_code = typer.prompt("LinkedIn ì¸ì¦ ì½”ë“œ ì…ë ¥")
        await verification_input.fill(verification_code)

    # "Trust this browser" ì²˜ë¦¬
    trust_button = await page.query_selector('button:has-text("Trust this browser")')
    if trust_button:
        await trust_button.click()
```

### 4. ë‹¤ì¤‘ ì„ íƒì ì‹œìŠ¤í…œ
**ë¬¸ì œ**: LinkedInì˜ ë³µì¡í•œ CSS í´ë˜ìŠ¤ êµ¬ì¡°

**í•´ê²°ì±…**: ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì„ íƒì
```python
post_selectors = [
    ".feed-shared-update-v2[data-urn]",      # 1ìˆœìœ„: data ì†ì„±
    '[data-id*="urn:li:activity:"]',         # 2ìˆœìœ„: activity ID
    ".feed-shared-update-v2",                # 3ìˆœìœ„: í´ë˜ìŠ¤
    '[data-urn*="update"]',                  # 4ìˆœìœ„: urn ì†ì„±
]
```

## ğŸ”§ ì½”ë“œ ìˆ˜ì • ê°€ì´ë“œ

### íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ì¶œ ë¡œì§ ìˆ˜ì •
```python
def _extract_time_from_text(self, text: str) -> str:
    # 1. ì •ê·œì‹ íŒ¨í„´ ë§¤ì¹­
    for pattern in time_patterns:
        match = re.search(pattern, text, re.IGNORECASE)
        if match:
            time_part = match.group(1).strip()
            if 'ìˆ˜ì •ë¨' in text:
                return f"{time_part} â€¢ ìˆ˜ì •ë¨ â€¢"
            return f"{time_part} â€¢"

    # 2. ê¸¸ì´ ì œí•œ (30ì ì´í•˜ë§Œ ì¸ì •)
    if len(first_sentence) < 30:
        return cleaned_text
```

### ìƒí˜¸ì‘ìš© ì¶”ì¶œ ê°œì„ 
```python
async def _extract_interactions_progressive(self, element):
    interactions = {"likes": None, "comments": None, "shares": None}

    # social-details-social-counts ì˜ì—­ì—ì„œ ì¶”ì¶œ
    social_counts = await element.query_selector(".social-details-social-counts")

    if social_counts:
        # ì¢‹ì•„ìš”/ë°˜ì‘ ìˆ˜
        reactions_button = await social_counts.query_selector("button[data-reaction-details]")

        # ëŒ“ê¸€ ìˆ˜
        comments_button = await social_counts.query_selector('button[aria-label*="ëŒ“ê¸€"]')

        # ê³µìœ  ìˆ˜ (í¼ê°)
        shares_elements = await social_counts.query_selector_all('span:has-text("í¼ê°")')
```

### ì ì§„ì  ê²Œì‹œê¸€ ìˆ˜ì§‘
```python
async def _progressive_post_collection(self, page, target_count):
    posts = []
    scroll_attempts = 0

    while len(posts) < target_count and scroll_attempts < self.max_scroll_attempts:
        # 1ë‹¨ê³„: ì „ì²´ ë”ë³´ê¸° ë²„íŠ¼ í´ë¦­
        await self._expand_all_posts_on_page(page)

        # 2ë‹¨ê³„: ìƒë‹¨ë¶€í„° ìˆœì°¨ ì¶”ì¶œ
        current_posts = await self._collect_expanded_posts(page, target_count)

        # 3ë‹¨ê³„: ì¤‘ë³µ ì œê±° ë° ì¶”ê°€
        for post_data in current_posts:
            if not self._is_duplicate(post_data, posts):
                posts.append(Post(platform="linkedin", **post_data))

        # 4ë‹¨ê³„: ìŠ¤í¬ë¡¤ (í•„ìš”ì‹œ)
        if len(posts) < target_count:
            await self._scroll_for_more_posts(page)
            scroll_attempts += 1
```

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ì¶”ì¶œ íš¨ìœ¨ì„± ê°œì„ 
1. **ë”ë³´ê¸° ì¼ê´„ ì²˜ë¦¬**: ê°œë³„ ì²˜ë¦¬ â†’ ì „ì²´ ì¼ê´„ ì²˜ë¦¬ë¡œ ì†ë„ í–¥ìƒ
2. **ìƒë‹¨ ìš°ì„  ì¶”ì¶œ**: DOM ìˆœì„œëŒ€ë¡œ ì¶”ì¶œí•˜ì—¬ ì•ˆì •ì„± í™•ë³´
3. **ìŠ¤ë§ˆíŠ¸ ìŠ¤í¬ë¡¤**: ìƒˆ ê²Œì‹œê¸€ì´ ì—†ìœ¼ë©´ ìŠ¤í¬ë¡¤ ì‹œë„

### ë©”ëª¨ë¦¬ ìµœì í™”
1. **ì¦‰ì‹œ ì²˜ë¦¬**: ê²Œì‹œê¸€ë³„ ì‹¤ì‹œê°„ Post ê°ì²´ ìƒì„±
2. **ì¤‘ë³µ ë°©ì§€**: URL ë° ì½˜í…ì¸  ê¸°ë°˜ ì¤‘ë³µ ê²€ì‚¬
3. **ì„ íƒì  ì¶”ì¶œ**: ìœ íš¨í•˜ì§€ ì•Šì€ ê²Œì‹œê¸€ ì¡°ê¸° í•„í„°ë§

## ğŸ¯ LinkedIn í¬ë¡¤ëŸ¬ íŠ¹ì´ì‚¬í•­

### 1. ê¸°ì—… vs ê°œì¸ ê²Œì‹œê¸€ êµ¬ë¶„
```python
# ê°œì¸ í”„ë¡œí•„: /in/username
author_link = await element.query_selector('a[href*="/in/"]')

# íšŒì‚¬ í˜ì´ì§€: /company/company-name
company_link = await element.query_selector('a[href*="/company/"]')
```

### 2. ì½˜í…ì¸  ì •ë¦¬ ì‹œìŠ¤í…œ
```python
def _clean_linkedin_content(self, content: str) -> str:
    exclude_keywords = [
        "like", "comment", "share", "repost",
        "ì¶”ì²œ", "ëŒ“ê¸€", "í¼ê°€ê¸°", "íŒ”ë¡œì›Œ",
        "1ì´Œ", "2ì´Œ", "3ì´Œ", "linkedin"
    ]
    # UI ìš”ì†Œ ì œê±° í›„ ì‹¤ì œ ì½˜í…ì¸ ë§Œ ë°˜í™˜
```

### 3. ê²Œì‹œê¸€ ìœ íš¨ì„± ê²€ì¦
```python
def _is_valid_post(self, post_data: Dict[str, Any]) -> bool:
    content = post_data.get("content")
    author = post_data.get("author")

    return bool(
        content and len(str(content).strip()) > 15 and
        author and str(author) != "Unknown"
    )
```

### 4. URL êµ¬ì¡° ì²˜ë¦¬
```python
# data-idì—ì„œ URN ì¶”ì¶œ
if "urn:li:activity:" in data_id:
    activity_id = data_id.split("urn:li:activity:")[-1]
    return f"https://www.linkedin.com/feed/update/urn:li:activity:{activity_id}/"
```

## ğŸš€ ì‹¤í–‰ ê°€ì´ë“œ

### ì²« ì‹¤í–‰ (ê³„ì • ì„¤ì •)
```bash
# í™˜ê²½ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ì— LinkedIn ê³„ì • ì •ë³´ ì…ë ¥

# ì²« í¬ë¡¤ë§ (ë¡œê·¸ì¸ í•„ìš”)
python main.py linkedin --count 5
```

### ì •ê¸° ì‹¤í–‰ (ì„¸ì…˜ ì¬ì‚¬ìš©)
```bash
# ì¼ë°˜ ëª¨ë“œ (ë¹ ë¥¸ ì‹¤í–‰)
python main.py linkedin --count 20

# ì¶œë ¥ íŒŒì¼ ì§€ì •
python main.py linkedin --count 10 --output my_linkedin.json
```

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
```bash
# ì„¸ì…˜ ì´ˆê¸°í™” (ë¡œê·¸ì¸ ë¬¸ì œ ì‹œ)
rm data/linkedin_session.json

# íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ì¶œ í™•ì¸
python main.py linkedin --count 3 | grep "timestamp"

# ë”ë³´ê¸° ë²„íŠ¼ í´ë¦­ í™•ì¸
python main.py linkedin --count 5 | grep "ë”ë³´ê¸° ë²„íŠ¼"
```

## ğŸ”§ í•µì‹¬ ê¸°ìˆ  í˜ì‹  (2025ë…„ 5ì›”)

### 1. íš¨ìœ¨ì ì¸ ë”ë³´ê¸° ì²˜ë¦¬
- **Before**: ê²Œì‹œê¸€ë³„ ê°œë³„ ë”ë³´ê¸° í´ë¦­
- **After**: í˜ì´ì§€ ì „ì²´ ì¼ê´„ í´ë¦­ â†’ ìƒë‹¨ë¶€í„° ì¶”ì¶œ

### 2. ì •ê·œì‹ ê¸°ë°˜ íƒ€ì„ìŠ¤íƒ­í”„ ì¶”ì¶œ
- **Before**: ì „ì²´ í…ìŠ¤íŠ¸ê°€ íƒ€ì„ìŠ¤íƒ¬í”„ë¡œ ì¶”ì¶œë˜ëŠ” ì˜¤ë¥˜
- **After**: íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ì •í™•í•œ ì‹œê°„ ì •ë³´ë§Œ ì¶”ì¶œ

### 3. Storage State ì„¸ì…˜ ê´€ë¦¬
- **ì¿ í‚¤ + localStorage** ëª¨ë‘ ì €ì¥í•˜ì—¬ ì•ˆì •ì ì¸ ì„¸ì…˜ ìœ ì§€
- ë¡œê·¸ì¸ ìƒíƒœ ìë™ í™•ì¸ ë° ë³µêµ¬

### 4. ë‹¤ì¤‘ ì„ íƒì Fallback ì‹œìŠ¤í…œ
- DOM êµ¬ì¡° ë³€ê²½ì— ê°•ê±´í•œ ì„ íƒì ìš°ì„ ìˆœìœ„ ì ìš©
- data ì†ì„± â†’ aria-label â†’ í´ë˜ìŠ¤ â†’ êµ¬ì¡°ì  ê´€ê³„ ìˆœì„œ

## ğŸ’¡ LinkedIn vs Threads ë¹„êµ

| íŠ¹ì§• | LinkedIn | Threads |
|---|---|---|
| ë¡œê·¸ì¸ ë°©ì‹ | LinkedIn ì§ì ‘ | Instagram ì—°ë™ |
| ë”ë³´ê¸° ì²˜ë¦¬ | ì¼ê´„ í´ë¦­ ë°©ì‹ | ê°œë³„ ì²˜ë¦¬ |
| íƒ€ì„ìŠ¤íƒ¬í”„ | ì •ê·œì‹ ì¶”ì¶œ | DOM êµ¬ì¡° ê¸°ë°˜ |
| ìƒí˜¸ì‘ìš© | 3ì¢…ë¥˜ (likes, comments, shares) | 4ì¢…ë¥˜ (likes, comments, reposts, shares) |
| ì„¸ì…˜ ê´€ë¦¬ | Storage State | Storage State |
| DOM ì•ˆì •ì„± | ë†’ìŒ (data ì†ì„±) | ë³´í†µ (í´ë˜ìŠ¤ ê¸°ë°˜) |
